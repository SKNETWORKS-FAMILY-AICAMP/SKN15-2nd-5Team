# SKN15-2nd-5Team (ì „ê¸° ìš”ê¸ˆ ê¸°ë°˜ ì´íƒˆ ì˜ˆì¸¡)

####  íŒ€ëª…: ì˜¤ì›ì¥ê³¼ ì•„ì´ë“¤

## íŒ€ ì†Œê°œ
| ì˜¤ì›ì¥ | ê¶Œë„ì› | ìœ ì˜ì • | ì¡°ì†”ì°¬ | í™ë¯¼ì‹ |
|--|--|--|--|--|
| @AQUAQUA5 | @dowonk120 | @Rr-EJ | @solchna | @minnnsik |
|  |


## í”„ë¡œì íŠ¸ ê¸°ê°„ ğŸ†
###  25ë…„ 07ì›” 10ì¼ (ëª©ìš”ì¼) ~ 25ë…„ 07ì›” 11ì¼ (ê¸ˆìš”ì¼) 

## âœ… í”„ë¡œì íŠ¸ ë°°ê²½ ë° ëª©ì 

íŒŒì›Œì½”(PowerCo)ëŠ” BCGì˜ í´ë¼ì´ì–¸íŠ¸ë¡œ, ì¤‘ì†Œê¸°ì—…(SME)ê³¼ ì£¼ê±° ê³ ê°ì—ê²Œ ê°€ìŠ¤ì™€ ì „ê¸°ë¥¼ ê³µê¸‰í•˜ëŠ” ì—ë„ˆì§€ íšŒì‚¬ì…ë‹ˆë‹¤.  
ìµœê·¼ ìœ ëŸ½ ì‹œì¥ì˜ ì „ë ¥ ììœ í™”(Power Liberalization)ì™€ ê°€ê²© ê²½ìŸ ì‹¬í™”ë¡œ, íŠ¹íˆ SME ê³ ê°ì¸µì—ì„œ ê³ ê° ì´íƒˆ(Churn)ë¥ ì´ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.

<img width="659" alt="reuter-1" src="https://github.com/user-attachments/assets/eda46139-5a46-462e-b157-9920afbfc204" />


### í”„ë¡œì íŠ¸ ëª©í‘œ

- ê³ ê°ì˜ ê³„ì•½, ì´ìš© íŒ¨í„´, ìš”ê¸ˆ, ë§ˆì§„, ë§ˆì¼€íŒ… ì´ë ¥ ë“± ë‹¤ì–‘í•œ íŠ¹ì„±ê³¼ ì´íƒˆ ê°„ ê´€ê³„ë¥¼ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„  
- ê³ ê° ì´íƒˆ í™•ë¥ (Churn Probability)ì„ ì˜ˆì¸¡í•˜ëŠ” ë¶„ë¥˜ ëª¨ë¸ ê°œë°œ  
- ì˜ˆì¸¡ ê²°ê³¼ë¥¼ í™œìš©í•´ íš¨ê³¼ì ì¸ ë§ˆì¼€íŒ… ì „ëµ(ì˜ˆ: í• ì¸ ìº í˜ì¸ íƒ€ê²ŸíŒ…) ìˆ˜ë¦½ì— í•„ìš”í•œ ì¸ì‚¬ì´íŠ¸ ë„ì¶œ


 
## ê¸°ìˆ  ìŠ¤íƒ
### AI & ë°ì´í„° ì²˜ë¦¬

![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
[](https://img.shields.io/badge/python-3776AB?style=for-the-badge&logo=python&logoColor=white)![](https://img.shields.io/badge/numpy-013243?style=for-the-badge&logo=numpy&logoColor=white)![](https://img.shields.io/badge/pandas-150458?style=for-the-badge&logo=pandas&logoColor=white)![](https://img.shields.io/badge/scikitlearn-F7931E?style=for-the-badge&logo=scikitlearn&logoColor=white)



### ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸
![](https://img.shields.io/badge/RandomForest-00B050?style=for-the-badge)![](https://img.shields.io/badge/DecisionTree-228B22?style=for-the-badge)![](https://img.shields.io/badge/XGBoost-EC0000?style=for-the-badge&logo=xgboost&logoColor=white)![](https://img.shields.io/badge/LightGBM-3C3C3C?style=for-the-badge&logo=lightgbm&logoColor=white) ![](https://img.shields.io/badge/CatBoost-FFCC00?style=for-the-badge)

![](https://img.shields.io/badge/SGDClassifier-006699?style=for-the-badge)![](https://img.shields.io/badge/Logistic%20Regression-1E90FF?style=for-the-badge)![](https://img.shields.io/badge/SVM-8A2BE2?style=for-the-badge)

### ë²„ì „ ê´€ë¦¬ ë° í˜‘ì—…

![](https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white) ![](https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white)

## 1. ë°ì´í„°ì…‹ ì†Œê°œ

ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” **Kaggle PowerCo ê³ ê° ì´íƒˆ ì˜ˆì¸¡** ë°ì´í„°ì…‹ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.  
ì´ ë°ì´í„°ëŠ” ìœ ëŸ½ ì§€ì—­ SME(ì¤‘ì†Œê¸°ì—…)ì™€ ì£¼ê±°ìš© ê³ ê°ì„ ëŒ€ìƒìœ¼ë¡œ ì „ê¸°Â·ê°€ìŠ¤ë¥¼ ê³µê¸‰í•˜ëŠ” PowerCoì‚¬ì˜ ì‹¤ì œ ê±°ë˜ ë° ì´íƒˆ ì´ë ¥ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.

PowerCoëŠ” ì „ë ¥ ì‹œì¥ ììœ í™”, ê°€ê²© ë¯¼ê°ë„ ì¦ê°€ ë“± í™˜ê²½ ë³€í™”ë¡œ ì¸í•´ ê³ ê° ì´íƒˆ(Churn) ê°€ëŠ¥ì„±ì´ ë†’ì•„ì§„ ìƒí™©ì—ì„œ,  
ì´íƒˆ ì˜ˆì¸¡ ëª¨ë¸ë§ì„ í†µí•´ "ì´íƒˆ ìœ„í—˜ ê³ ê°"ì—ê²Œ 20% í• ì¸ ë“± ì°¨ë³„ì  ë§ˆì¼€íŒ… ì „ëµì„ ì ìš©í• ì§€ íŒë‹¨í•˜ê³ ì í•©ë‹ˆë‹¤.

ë°ì´í„°ì…‹ì€ ë‹¤ìŒ ì„¸ ê°œì˜ ì£¼ìš” íŒŒì¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

- **ml_case_training_data.csv**  
    - ê³ ê° ê¸°ë³¸ ì •ë³´ê°€ ë‹´ê¸´ ë©”ì¸ íŒŒì¼

- **ml_case_training_hist_data.csv**  
    - ê³ ê°ë³„ ì›”ë³„ ê³„ì•½ ê°€ê²© ì •ë³´(ë³€ë™ë‹¨ê°€Â·ê³ ì •ë‹¨ê°€ í¬í•¨) ì œê³µ  

- **ml_case_training_output.csv**  
    - íƒ€ê²Ÿ ë³€ìˆ˜ 

## 2. ë³€ìˆ˜ ì†Œê°œ


### 2.1 Train_data (ê³ ê°ë³„ í”„ë¡œí•„Â·ì˜ˆì¸¡ ì •ë³´)

| ì»¬ëŸ¼ëª…                    | ë°ì´í„° íƒ€ì…       | ì„¤ëª…                             | ì¹´ë””ë„ë¦¬í‹° | ê²°ì¸¡ ë¹„ìœ¨ | ê²°ì¸¡ ì²˜ë¦¬ ë°©ì‹              |
|--------------------------|------------------|---------------------------------|-----------:|---------:|---------------------------|
| id                       | object           | ê³ ê° ê³ ìœ  ì‹ë³„ì                 |     16 096 |     0.00% | n/a                       |
| channel_sales            | object           | ê°€ì… ì˜ì—… ì±„ë„ ì½”ë“œ              |          7 |    26.21% | fillna("new category")    |
| activity_new             | object           | íšŒì‚¬ í™œë™ ì¹´í…Œê³ ë¦¬               |        419 |    59.30% | review & merge categories |
| campaign_disc_ele        | float64          | ë§ˆì§€ë§‰ ê°€ì… ì „ê¸° ìº í˜ì¸ ì½”ë“œ     |          1 |   100.00% | drop                      |
| cons_12m                 | int64            | ìµœê·¼ 12ê°œì›”ê°„ ì „ê¸° ì‚¬ìš©ëŸ‰        |       2 342 |     0.00% | n/a                       |
| cons_gas_12m             | int64            | ìµœê·¼ 12ê°œì›”ê°„ ê°€ìŠ¤ ì‚¬ìš©ëŸ‰        |       1 820 |     0.00% | n/a                       |
| cons_last_month          | int64            | ì§ì „ ì›” ì „ê¸° ì‚¬ìš©ëŸ‰              |       1 200 |     0.00% | n/a                       |
| imp_cons                 | float64          | í˜„ì¬ ì²­êµ¬ëœ ì‚¬ìš©ëŸ‰               |       3 150 |     0.22% | n/a                       |
| forecast_cons            | float64          | ë‹¤ìŒ ë‹¬ ì˜ˆìƒ ì „ê¸° ì‚¬ìš©ëŸ‰         |       3 210 |    21.10% | n/a                       |
| forecast_cons_12m        | float64          | ë‹¤ìŒ 12ê°œì›” ì˜ˆìƒ ì „ê¸° ì‚¬ìš©ëŸ‰     |       2 450 |     0.00% | n/a                       |
| forecast_cons_year       | int64            | ì—°ê°„ ì˜ˆìƒ ì „ê¸° ì‚¬ìš©ëŸ‰            |       2 460 |     0.00% | n/a                       |
| forecast_price_energy_p1 | float64          | 1êµ¬ê°„ ì˜ˆìƒ ì—ë„ˆì§€ ë‹¨ê°€           |         120 |     0.00% | n/a                       |
| forecast_price_energy_p2 | float64          | 2êµ¬ê°„ ì˜ˆìƒ ì—ë„ˆì§€ ë‹¨ê°€           |           1 |    70.00% | n/a                       |
| forecast_price_pow_p1    | float64          | 1êµ¬ê°„ ì˜ˆìƒ ì „ë ¥ ë‹¨ê°€             |         134 |     0.00% | n/a                       |
| margin_gross_pow_ele     | float64          | ì „ë ¥ ê°€ì… ì´ ë§ˆì§„                |       4 181 |     0.08% | n/a                       |
| margin_net_pow_ele       | float64          | ì „ë ¥ ê°€ì… ìˆœë§ˆì§„                 |       4 181 |     0.08% | n/a                       |
| net_margin               | float64          | ì „ì²´ ìˆœë§ˆì§„                      |       4 181 |     0.09% | n/a                       |
| nb_prod_act              | int64            | í™œì„±í™”ëœ ìƒí’ˆÂ·ì„œë¹„ìŠ¤ ê°œìˆ˜        |          11 |     0.00% | n/a                       |
| num_years_antig          | int64            | ê³ ê° ê°€ì… ê²½ê³¼ ì—°ìˆ˜              |          15 |     0.00% | n/a                       |
| origin_up                | object           | ìµœì´ˆ ê°€ì… ì „ê¸° ìº í˜ì¸ ì½”ë“œ       |          15 |     0.54% | most_frequent            |
| date_activ               | datetime64[ns]   | ê³„ì•½ í™œì„±í™” ë‚ ì§œ                 |            â€“ |     0.00% | n/a (NaT ìœ ì§€)           |
| date_first_activ         | datetime64[ns]   | ê³ ê° ì²« ê³„ì•½ ì‹œì‘ì¼              |            â€“ |    78.21% | drop                      |
| date_modif_prod          | datetime64[ns]   | ìƒí’ˆ ë§ˆì§€ë§‰ ìˆ˜ì •ì¼               |            â€“ |     0.98% | bfill                     |
| date_renewal             | datetime64[ns]   | ë‹¤ìŒ ê³„ì•½ ê°±ì‹ ì¼                 |            â€“ |     0.25% | bfill                     |
| date_end                 | datetime64[ns]   | ê³„ì•½ ì¢…ë£Œ ë“±ë¡ì¼                 |            â€“ |     0.01% | bfill                     |

---

### 2.2 Hist_data (ì›”ë³„ ì†Œë¹„Â·ë‹¨ê°€ ì‹œê³„ì—´)

| ì»¬ëŸ¼ëª…        | ë°ì´í„° íƒ€ì…       | ì„¤ëª…                   | ì¹´ë””ë„ë¦¬í‹° | ê²°ì¸¡ ë¹„ìœ¨ | ê²°ì¸¡ ì²˜ë¦¬ ë°©ì‹ |
|--------------|------------------|-----------------------|-----------:|---------:|---------------|
| id           | object           | ê³ ê° ê³ ìœ  ì‹ë³„ì       |     16 096 |     0.00% | n/a           |
| price_date   | datetime64[ns]   | ì²­êµ¬ ê¸°ì¤€ì¼            |          12 |     0.00% | n/a           |
| price_p1_var | float64          | 1êµ¬ê°„ ê°€ë³€ ì—ë„ˆì§€ ë‹¨ê°€ |          12 |     0.00% | n/a           |
| price_p2_var | float64          | 2êµ¬ê°„ ê°€ë³€ ì—ë„ˆì§€ ë‹¨ê°€ |          10 |     0.00% | n/a           |
| price_p3_var | float64          | 3êµ¬ê°„ ê°€ë³€ ì—ë„ˆì§€ ë‹¨ê°€ |           8 |     0.00% | n/a           |
| price_p1_fix | float64          | 1êµ¬ê°„ ê³ ì • ì „ë ¥ ë‹¨ê°€   |          12 |     0.00% | n/a           |
| price_p2_fix | float64          | 2êµ¬ê°„ ê³ ì • ì „ë ¥ ë‹¨ê°€   |          10 |     0.00% | n/a           |
| price_p3_fix | float64          | 3êµ¬ê°„ ê³ ì • ì „ë ¥ ë‹¨ê°€   |           6 |     0.00% | n/a           |

---

### 2.3 Output_data (íƒ€ê¹ƒ)

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ì… | ì„¤ëª…                          | ì¹´ë””ë„ë¦¬í‹° | ê²°ì¸¡ ë¹„ìœ¨ | ê²°ì¸¡ ì²˜ë¦¬ ë°©ì‹ |
|-------|-------------|-------------------------------|-----------:|---------:|---------------|
| id    | object      | ê³ ê° ê³ ìœ  ì‹ë³„ì              |     16 096 |     0.00% | n/a           |
| churn | int64       | ì´íƒˆ ì—¬ë¶€ (0 = ìœ ì§€, 1 = ì´íƒˆ) |           2 |     0.00% | n/a           |


## 3. ë¶„í¬ ì†Œê°œ

**ë²”ì£¼í˜• ë°ì´í„°**
| ë³€ìˆ˜ëª…                                                                                               | ì˜ë¯¸                    | ê³ ìœ ê°’ ìˆ˜ (Unique) | ë¶„ì„ ì¸ì‚¬ì´íŠ¸ ìš”ì•½                 |
| ------------------------------------------------------------------------------------------------- | --------------------- | -------------- | -------------------------- |
| `activity_new`, `date_active`, `date_end`, `date_first_active`, `date_modif_prod`, `date_renewal` | ê³ ê° í™œë™ ë° ê´€ë ¨ ë‚ ì§œ ì •ë³´      | ë§¤ìš° ë§ìŒ (ë‹¤ìˆ˜)     | ê³ ìœ ê°’ì´ ë§ì•„ íƒ€ê²Ÿê³¼ì˜ ì§ì ‘ ì—°ê´€ì„± ë¶„ì„ ì–´ë ¤ì›€ |
| `channel_sales`                                                                                   | ê³ ê° ê°€ì… ê²½ë¡œ              | 7ê°œ             | íŠ¹ì • ê²½ë¡œì—ì„œ ê°€ì…í•˜ê±°ë‚˜ ì´íƒˆí•œ ê³ ê°ì´ ë§ìŒ   |
| `has_gas`                                                                                         | ì „ê¸° ì™¸ì— ê°€ìŠ¤ ì„œë¹„ìŠ¤ ê°€ì… ì—¬ë¶€    | 2ê°œ (`0`, `1`)  | ì „ê¸°ë§Œ ê°€ì…í•œ ê³ ê° ìˆ˜ê°€ ë” ë§ìŒ         |
| `origin_up`                                                                                       | ìµœì´ˆ ê°€ì… ì‹œ ì‚¬ìš©í•œ ì „ê¸° ìº í˜ì¸ ì½”ë“œ | 5ê°œ             | ì´íƒˆê³¼ ë¹„ì´íƒˆ ê°„ ì°¨ì´ ë¶„ì„ ê°€ëŠ¥         |

  
![](https://www.kaggleusercontent.com/kf/249884298/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..S7ubOFvyJyMZbwlZyRkbYw.rKits_cfq7UmIIemmdoI85UdOMV5Zlxvo2FAMU7hi6RGRmMSse_gGdZbCcEpJo2zxBiFCsHhDRoWgq_VgUNVmWss2Y9CSVIfYwLjK10S51b05N0AhVmRegTxnhag92aJqEm6L65CQoZAMj4hK5Xs8UgARWnXA8UcMKGn-az7oGpnyvAFF8vT_vBBEnRTI5dUTO7xlrFMgvzPqYq8nFhz2CxQSuA00BBOLkU48AnGNvx5BkBVFkahaKF63_wZTh9SouiBfaKJTOAzUtDRiXqRwXU_D5cXt2xJQoj4GmDL2RIJjaXhK9yfVPu-ikNw_EsFy9_kDk1q8sju5QJgSC-x19CJhM85bOwwoOpMwqZlx13np6F7s5AgL92MQx5GU9U4PsujDMcyJeAqEmZP54Y3eL8GZvLYOFUZ1J0VsESMyPsvZkpjKLswcutLaYKc6JaabgbQH5f_RlGl-kPSoyHarF20FieJGWndmW2UDZWAzUhBLPCRMwszykfpeNbuBAeGrsVOPeFTpIu3PfJ-VADsWSNcCnAcVQAc6xhH-ELe4JqB1GsJDFHzbWUTaMh4NNFwoaLJ7njX02IOBldYbSfGhM2fSGugHxPRzegegQuFWJXD7Ag2uSclDmxC8Q7CX7nY.9o16I9Wd-RUalkoscYB-RQ/__results___files/__results___16_0.png)


- **ìˆ˜ì¹˜í˜• ë°ì´í„°**

| ë³€ìˆ˜ëª…                  | ì˜ë¯¸                            | ë¶„ì„ ì¸ì‚¬ì´íŠ¸ ìš”ì•½                            |
| -------------------- | ------------------------------- | ----------------------------------------- |
| `cons_last_month`    | ê³ ê°ì˜ **ìµœê·¼ í•œ ë‹¬ ì „ê¸° ì‚¬ìš©ëŸ‰**           | ì´íƒˆ ì§ì „ ì†Œë¹„ëŸ‰ì´ ì ì€ ê³ ê°ì´ ë§ì•„, **í–‰ë™ ë³€í™” ê°ì§€ì— íš¨ê³¼ì **   |
| `cons_12m`           | ê³ ê°ì˜ **ìµœê·¼ 12ê°œì›”ê°„ ì „ê¸° ì´ì‚¬ìš©ëŸ‰**        | ì—°ê°„ ì‚¬ìš©ëŸ‰ì´ ì ì€ ê³ ê°ì—ì„œ ì´íƒˆë¥  ë†’ìŒ. **ì†Œê·œëª¨ ì‚¬ìš©ì ì´íƒˆ ê²½í–¥** |
| `nb_prod_act`        | ê³ ê°ì´ **í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ìƒí’ˆ ê°œìˆ˜**          | ìƒí’ˆ ìˆ˜ê°€ ì ì„ìˆ˜ë¡ ì´íƒˆë¥ ì´ ë†’ìŒ. **ì¶©ì„±ë„ ë° ê´€ì—¬ë„ ë°˜ì˜**      |
| `net_margin`         | ê³ ê°ìœ¼ë¡œë¶€í„° ì–»ëŠ” **ì´ ìˆœë§ˆì§„** | ì†í•´ ê³ ê°ì—ì„œ ì´íƒˆë¥  ë†’ìŒ. **ê³ ê° ìˆ˜ìµì„±ê³¼ ì´íƒˆ ì—°ê²°**         |
| `margin_net_pow_ele` | ì „ê¸° ê³µê¸‰ì„ í†µí•œ **ì „ë ¥ ê°€ì… ìˆœë§ˆì§„**           | ìˆ˜ìµì´ ì ì„ìˆ˜ë¡ ì´íƒˆ ê°€ëŠ¥ì„± ë†’ìŒ. **ê°€ê²© ë¯¼ê°ë„ ìˆëŠ” ê³ ê° íŠ¹ì„±**   |
| `num_years_antig`    | ê³ ê°ì´ **ê°€ì…í•œ ì´í›„ ê²½ê³¼í•œ ì—°ìˆ˜**           | ê°€ì… ê¸°ê°„ì´ ì§§ì„ìˆ˜ë¡ ì´íƒˆë¥  ë†’ìŒ. **ì‹ ê·œ ê³ ê° ë¦¬ìŠ¤í¬** íŒŒì•… ê°€ëŠ¥   |

  
![](https://www.kaggleusercontent.com/kf/249884298/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..S7ubOFvyJyMZbwlZyRkbYw.rKits_cfq7UmIIemmdoI85UdOMV5Zlxvo2FAMU7hi6RGRmMSse_gGdZbCcEpJo2zxBiFCsHhDRoWgq_VgUNVmWss2Y9CSVIfYwLjK10S51b05N0AhVmRegTxnhag92aJqEm6L65CQoZAMj4hK5Xs8UgARWnXA8UcMKGn-az7oGpnyvAFF8vT_vBBEnRTI5dUTO7xlrFMgvzPqYq8nFhz2CxQSuA00BBOLkU48AnGNvx5BkBVFkahaKF63_wZTh9SouiBfaKJTOAzUtDRiXqRwXU_D5cXt2xJQoj4GmDL2RIJjaXhK9yfVPu-ikNw_EsFy9_kDk1q8sju5QJgSC-x19CJhM85bOwwoOpMwqZlx13np6F7s5AgL92MQx5GU9U4PsujDMcyJeAqEmZP54Y3eL8GZvLYOFUZ1J0VsESMyPsvZkpjKLswcutLaYKc6JaabgbQH5f_RlGl-kPSoyHarF20FieJGWndmW2UDZWAzUhBLPCRMwszykfpeNbuBAeGrsVOPeFTpIu3PfJ-VADsWSNcCnAcVQAc6xhH-ELe4JqB1GsJDFHzbWUTaMh4NNFwoaLJ7njX02IOBldYbSfGhM2fSGugHxPRzegegQuFWJXD7Ag2uSclDmxC8Q7CX7nY.9o16I9Wd-RUalkoscYB-RQ/__results___files/__results___18_0.png)

- **íƒ€ê²Ÿ (ì´íƒˆ / ë¹„ì´íƒˆ)**
    - íƒ€ê²Ÿ ë°ì´í„° ë¶„í¬ 9:1ë¡œ ë¶ˆê· í˜• ì‹¬í•¨
      
![](https://www.kaggleusercontent.com/kf/249884298/eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..S7ubOFvyJyMZbwlZyRkbYw.rKits_cfq7UmIIemmdoI85UdOMV5Zlxvo2FAMU7hi6RGRmMSse_gGdZbCcEpJo2zxBiFCsHhDRoWgq_VgUNVmWss2Y9CSVIfYwLjK10S51b05N0AhVmRegTxnhag92aJqEm6L65CQoZAMj4hK5Xs8UgARWnXA8UcMKGn-az7oGpnyvAFF8vT_vBBEnRTI5dUTO7xlrFMgvzPqYq8nFhz2CxQSuA00BBOLkU48AnGNvx5BkBVFkahaKF63_wZTh9SouiBfaKJTOAzUtDRiXqRwXU_D5cXt2xJQoj4GmDL2RIJjaXhK9yfVPu-ikNw_EsFy9_kDk1q8sju5QJgSC-x19CJhM85bOwwoOpMwqZlx13np6F7s5AgL92MQx5GU9U4PsujDMcyJeAqEmZP54Y3eL8GZvLYOFUZ1J0VsESMyPsvZkpjKLswcutLaYKc6JaabgbQH5f_RlGl-kPSoyHarF20FieJGWndmW2UDZWAzUhBLPCRMwszykfpeNbuBAeGrsVOPeFTpIu3PfJ-VADsWSNcCnAcVQAc6xhH-ELe4JqB1GsJDFHzbWUTaMh4NNFwoaLJ7njX02IOBldYbSfGhM2fSGugHxPRzegegQuFWJXD7Ag2uSclDmxC8Q7CX7nY.9o16I9Wd-RUalkoscYB-RQ/__results___files/__results___20_0.png)


## 4. ê¸°ì¡´ ì‚¬ë¡€
| No. | Dataset      | Description                                                     | EDA ìš”ì•½                                                                                                    | Model                                      | Accuracy | Precision | Recall  | F1-score | Reference                                                                                         |
|-----|-------------|-----------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|--------------------------------------------|----------|-----------|---------|----------|---------------------------------------------------------------------------------------------------|
| 1   | PowerCo     | ë‹¤ì–‘í•œ ì „ì²˜ë¦¬ ë° ì´íƒˆë¥  ë¶„ì„ ì ìš©                                | ê²°ì¸¡ì¹˜ ì²˜ë¦¬<br>ì´íƒˆë¥  ì‹œê°í™”<br>ì´ìƒì¹˜ ì ˆëŒ€ê°’ ë³€í™˜<br>ë°ì´í„° íƒ€ì… ë³€í™˜ ë° í´ë¦° ë°ì´í„°ì…‹ êµ¬ì¶•                  | xgb.XGBClassifier                          | 0.981368 | 0.998939  | 0.808022|          | [Link](https://www.kaggle.com/code/iamarjunchandra/powerco-business-problem-from-bcg-consulting)  |
| 2   | Telco Churn | í†µì‹ ì‚¬ ê³ ê° ì´íƒˆ ì—¬ë¶€ ì˜ˆì¸¡                                      | ê²°ì¸¡ì¹˜/ì´ìƒì¹˜/ì¤‘ë³µ ì œê±°<br>ì¸ì½”ë”© ë° ì‹œê°í™”<br>ê³„ì•½ ìœ í˜•Â·ìš”ê¸ˆ ë¶„ì„<br>SMOTE ì ìš©                             | Random Forest<br>SVM, KNN (Best), AdaBoost | 0.898    | 0.650     | 0.0426  |          |                                                                                                   |
| 3   | CoE         | ë‹¤ë¥¸ ì½”ë“œ ê¸°ë°˜, ìµœì‹  ê¸°ë²• ì ìš©                                  | íŒŒìƒ ë³€ìˆ˜ ìƒì„±<br>PCAÂ·ë¡œê·¸ ë³€í™˜<br>ìƒê´€ê´€ê³„ ë¶„ì„ ë° ì •ì œ                                                    | Random Forest<br>Naive Bayes, SVM          | 0.950    |           | 0.91    | 0.93     |                                                                                                   |
| 4   | Bank Churn  | ì€í–‰ ì‹ ìš©ì¹´ë“œ ê³ ê° ì´íƒˆ ë¶„ì„<br>ì´ë²ˆ ë‹¬ ì´íƒˆ ì—¬ë¶€(churn) ì˜ˆì¸¡   | ê²°ì¸¡ì¹˜ ì œê±°Â·ì¸ì½”ë”©<br>ë¶„í¬ ì‹œê°í™”(ì—°ë ¹, ì¹´ë“œ ë“±ê¸‰, ìƒí’ˆ ìˆ˜, í•œë„, ì”ê³  ë“±)<br>ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ<br>ì´íƒˆ íŠ¹ì„± ë¹„êµ<br>K-Means êµ°ì§‘ ë¶„ì„ ë° ì‹œê°í™” | Random Forest<br>AdaBoost<br>SVM           | 0.9091   | 0.9091    | 0.9087  | 0.9087   |                                                                                                   |

## 5. ì§€í‘œ ì„¤ì •
ì´íƒˆí•  ê²ƒìœ¼ë¡œ ì˜ˆì¸¡ë˜ëŠ” ê³ ê°ì—ê²Œ 20í¼ì„¼íŠ¸ í• ì¸ì„ í•˜ì—¬ ì´íƒˆì„ ë§‰ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤.  
ì‚¬ìš©ì‹œ ì´ìœ¤ì´ í° ëª¨ë¸ì´ ê°€ì¥ ì¢‹ì€ ëª¨ë¸ì´ë‹¤. ë”°ë¼ì„œ í‰ê°€ì§€í‘œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

r = ê³ ê° 1ëª…ë‹¹ ë§ˆì¼€íŒ…ìœ¼ë¡œ ì¸í•œ ë§¤ì¶œ ì¦ê°€ëŸ‰  
c = ê³ ê° 1ëª…ë‹¹ ë§ˆì¼€íŒ… ë¹„ìš©



$$
\frac{\text{ëª¨ë¸ì˜ ì˜ˆì¸¡ì— ë”°ë¥¸ ì´ìœ¤}}{\text{ì •í™•í•˜ê²Œ ì˜ˆì¸¡ ì‹œ ì´ìœ¤}} = 
\frac{{r \times (ì´íƒˆì˜ˆì¸¡\,ì¤‘\,ì‹¤ì œì´íƒˆ\,ìˆ˜) - c \times (ì´íƒˆì˜ˆì¸¡ \,ìˆ˜)}}{{( r-c )\times(ì‹¤ì œì´íƒˆ\,ìˆ˜)}}
$$


$$
\frac{TP \times r  - ( TP + FP ) \times c}{(TP+FN)(r - c)}
$$ 

$$
= Recall + \frac{1}{(r - c)} ( Recall- \frac{Recall}{Precision}) \ 
$$


$$
ì´ë•Œ,  \frac{1}{(r - c)} \approx 0 ì´ë‹ˆ
$$
$$
= Recall + \frac{1}{(r - c)} ( Recall- \frac{Recall}{Precision}) \approx Recall
$$



ë”°ë¼ì„œ Recallì´ ë†’ì€ ëª¨ë¸ì„ ëª©í‘œë¡œ ì§„í–‰í•œë‹¤.

## 6. ì „ì²˜ë¦¬

ê²°ì¸¡ì¹˜ 70% ì´ìƒ ì¹¼ëŸ¼ ì œê±°  
ê³ ê° íšŒì‚¬ í™œë™, ê³ ê°ì´ ê°€ì…í•œ ìº í˜ì¸ ì¹¼ëŸ¼ì€ ì˜¤ë¸Œì íŠ¸ í˜•ì´ë¯€ë¡œ ê²°ì¸¡ì¹˜ë¥¼ ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜í•œë‹¤.   

ì¹´í…Œê³ ë¦¬ë¥¼ ì›í•« ì¸ì½”ë”©í•˜ë©´ ì¹´í…Œê³ ë¦¬ê°„ì˜ ìœ ì‚¬ì„±ì„ ê³ ë ¤í•˜ì§€ ëª»í•œë‹¤.  
ì´ë¥¼í…Œë©´   
```ê´€ê´‘ì—…```ê³¼ ```ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ì—…``` ê°„ì˜ ê±°ë¦¬ = ```ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ì—…```ê³¼ ```ë”¥ëŸ¬ë‹ ì‚¬ì—…```ê°„ì˜ ê±°ë¦¬  
ë¡œ ì¸ì‹í•˜ê²Œ ëœë‹¤.  
ë”°ë¼ì„œ ì¹´í…Œê³ ë¦¬ëŠ” ë‹¨ì–´ì˜ ìœ ì‚¬ì„±ì„ ë°˜ì˜í•˜ëŠ” ì›Œë“œ ì„ë² ë”©ì„ ì‹œë„.
ì¹´í…Œê³ ë¦¬ê°€ ì½”ë“œë¡œ ì €ì¥ë˜ì–´ìˆì–´ ì‹¤íŒ¨. 

ë‚ ì§œë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜  

date_end ì¹¼ëŸ¼ì˜ ê²°ì¸¡ì¹˜ : ```ê³„ì•½ì‹œì‘ì¼``` + ```í‰ê·  ê³„ì•½ê¸°ê°„```ìœ¼ë¡œ ì„¤ì •
```
ì´íƒˆ = clean[clean['churn'] == 1]
ìœ ì§€ = clean[clean['churn'] == 0]

m = int((ìœ ì§€["date_end"] - ìœ ì§€["date_activ"]).mean())
mask = clean["date_end"].isna()
clean.loc[mask, "date_end"] = clean.loc[mask, "date_activ"] + m
```
ë‚ ì§œ ì¹¼ëŸ¼ë“¤ì€ ë°ì´í„° ì œì•½ ì¡°ê±´ì´ ìˆë‹¤.  
ì˜ˆë¥¼ë“¤ì–´ ê³„ì•½ ì‹œì‘ì¼ì€ ë°˜ë“œì‹œ ê³„ì•½ ì¢…ë£Œì¼ë³´ë‹¤ ë¹¨ë¼ì•¼í•œë‹¤.  
ì´ëŸ¬í•œ ë°ì´í„° ì œì•½ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ì„œ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš´ë‹¤.  

ì´ ë°ì´í„°ì…‹ì˜ ì¡°ê±´ì€
> date_activ, date_renewal <= date_end

ë‚ ì§œí˜• ì¹¼ëŸ¼ë§Œ ì‚´í´ë³¸ë‹¤.
|   | date_activ | date_end | date_modif_prod | date_renewal |
|---|------------|----------|-----------------|--------------|
| 0 | 4694       | 6154     | 4694            | 5791         |
| 1 | 4914       | 6010     | <NA>            | 5652         |
| 2 | 3520       | 6086     | 3520            | 5721         |
| 3 | 3758       | 5950     | 3758            | 5585         |
| 4 | 3741       | 5933     | 3741            | 5568         |

date_activì™€ date_modif_prodê°€ ê°™ì€ ë°ì´í„°ë“¤ì´ ê°„í˜¹ ìˆë‹¤.
```
#ë¹„ì´íƒˆìë“¤ì˜ date_modif_prod - date_activ
lt_0 = clean[clean["churn"]==0]["date_modif_prod"] - clean[clean["churn"]==0]["date_activ"]
print(f"ë¹„ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: {(lt_0== 0).sum() / lt_0.shape[0]:.4f}")

#ì´íƒˆìë“¤ì˜ date_modif_prod - date_activ
lt_1 = clean[clean["churn"]==1]["date_modif_prod"] - clean[clean["churn"]==1]["date_activ"]
print(f"ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: {(lt_1== 0).sum() / lt_1.shape[0]:.4f}")
```
ë¹„ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: 0.5034   
ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: 0.4301
ìƒí’ˆ ìˆ˜ì •ê¹Œì§€ì˜ ì†Œìš”ì‹œê°„ì´ 7%p ì°¨ì´ë‚˜ëŠ” ê²ƒì„ í™•ì¸

ì´ë¥¼ ê³ ë ¤í•˜ì—¬ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš´ë‹¤.
```
#ì´ê²ƒì„ ê³ ë ¤í•˜ì—¬ ê²°ì¸¡ì¹˜ë¥¼ ì±„ì›€
import numpy as np
lt_0_rat = 0.5034
lt_0_mean = 1432

lt_1_rat = 0.4301
lt_1_mean = 1266

#ë¹„ì´íƒˆìì—ì„œ 0ì˜ ë¹„ìœ¨ë§Œí¼ 0 í• ë‹¹ 
mask = clean['date_modif_prod'].isna() & (clean['churn'] == 0)
na_idx = clean[mask].index
n_total = len(na_idx)
n_zero = int(n_total * lt_0_rat)
zero_idx = np.random.choice(na_idx, size=n_zero, replace=False)
clean.loc[zero_idx, 'date_modif_prod'] = 0

#ë¹„ì´íƒˆìì—ì„œ ë‚˜ë¨¸ì§€ëŠ” date_activ+í‰ê· ìœ¼ë¡œ í• ë‹¹
mask = clean["date_modif_prod"].isna() & (clean["churn"] == 0)
clean.loc[mask, "date_modif_prod"] = clean.loc[mask, "date_activ"] + lt_0_mean


#ì´íƒˆìì—ì„œ 0ì˜ ë¹„ìœ¨ë§Œí¼ 0 í• ë‹¹ 
mask = clean['date_modif_prod'].isna() & (clean['churn'] == 1)
na_idx = clean[mask].index
n_total = len(na_idx)
n_zero = int(n_total * lt_1_rat)
zero_idx = np.random.choice(na_idx, size=n_zero, replace=False)
clean.loc[zero_idx, 'date_modif_prod'] = 0

#ë¹„ì´íƒˆìì—ì„œ ë‚˜ë¨¸ì§€ëŠ” date_activ+í‰ê· ìœ¼ë¡œ í• ë‹¹
mask = clean["date_modif_prod"].isna() & (clean["churn"] == 1)
clean.loc[mask, "date_modif_prod"] = clean.loc[mask, "date_activ"] + lt_1_mean
```

date_renewalì€ íŠ¹ë³„í•œ íŠ¹ì„±ì´ ì—†ìœ¼ë‹ˆ ë°ì´í„° ì¡°ê±´ì„ ë§Œì¡±í•˜ê²Œë” ê²°ì¸¡ì¹˜ ì™„ì„±

ë°ì´í„° ì¡°ê±´ : ```date_activ, date_renewal <= date_end```
dr = (1- (dr-de / de-da)mean) *de
```
mean = ((clean["date_renewal"] - clean["date_end"]) / (clean["date_end"] - clean["date_activ"])).mean()
mask = clean["date_renewal"].isna()
clean.loc[mask, "date_renewal"] = ((1 - mean) * clean.loc[mask, "date_end"]).astype(int)
```

## 7. ë°ì´í„° ì¦ê°• í›„ ëª¨ë¸ë³„ ì„±ëŠ¥ ë¹„êµ

SMOTEìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¦ê°•í•œë‹¤.

```
TransformerWrapper(exclude=None, include=None, transformer=FixImbalancer(estimator=SMOTE(k_neighbors=5, random_state=42, sampling_strategy='auto')))
```
KNN, K=5 ì‚¬ìš©

| Description                 | Value            |
|:----------------------------|:-----------------|
| Session id                  | 42               |
| Target                      | churn            |
| Target type                 | Binary           |
| Original data shape         | (193002, 29)     |
| Transformed data shape      | (301351, 40)     |
| Transformed train set shape | (243450, 40)     |
| Transformed test set shape  | (57901, 40)      |
| Numeric features            | 24               |
| Categorical features        | 4                |
| Preprocess                  | True             |
| Imputation type             | simple           |
| Numeric imputation          | mean             |
| Categorical imputation      | mode             |
| Maximum one-hot encoding    | 25               |
| Encoding method             | None             |
| Fix imbalance               | True             |
| Fix imbalance method        | SMOTE            |
| Fold Generator              | StratifiedKFold  |
| Fold Number                 | 10               |
| Log Experiment              | False            |
| Experiment Name             | clf-default-name |
| USI                         | cbd6             |

ìµœì¢… í•™ìŠµ ë°ì´í„°ì˜ í˜•íƒœëŠ” ìœ„ì™€ ê°™ë‹¤.
XGBoost, CatBoost, LightGBMì„ í¬í•¨í•œ 16ì¢…ì˜ ë¨¸ì‹ ëŸ¬ë‹ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

| Model               | Accuracy |   AUC  | Recall | Precision |   F1   | Kappa  |  MCC   | TT (Sec) |
|:--------------------|---------:|-------:|-------:|----------:|-------:|-------:|-------:|---------:|
| KNN                 | 0.9996   | 1.0000 | 1.0000 | 0.9961    | 0.9980 | 0.9978 | 0.9978 |   3.386  |
| Random Forest       | 0.9999   | 1.0000 | 0.9993 | 0.9999    | 0.9988 | 0.9998 | 0.9996 |   6.533  |
| Extra Trees         | 0.9998   | 1.0000 | 0.9981 | 0.9999    | 0.9990 | 0.9989 | 0.9989 |   7.581  |
| Decision Tree       | 0.9985   | 0.9961 | 0.9931 | 0.9916    | 0.9924 | 0.9915 | 0.9915 |   1.033  |
| CatBoost            | 0.9941   | 0.9992 | 0.9822 | 0.9594    | 0.9707 | 0.9674 | 0.9675 |  44.064  |
| XGBoost             | 0.9649   | 0.9887 | 0.9132 | 0.7736    | 0.8375 | 0.8180 | 0.8216 |   1.647  |
| Dummy Classifier    | 0.9010   | 0.5000 | 0.0000 | 0.0000    | 0.0000 | 0.0000 | 0.0000 |   0.656  |
| LightGBM            | 0.8880   | 0.9285 | 0.7693 | 0.4608    | 0.5763 | 0.5164 | 0.5390 | 117.068  |
| Gradient Boosting   | 0.7546   | 0.7797 | 0.6388 | 0.2318    | 0.3401 | 0.2280 | 0.2723 |  10.997  |
| AdaBoost            | 0.6875   | 0.7233 | 0.6255 | 0.1836    | 0.2839 | 0.1544 | 0.2021 |   3.075  |
| LDA                 | 0.6108   | 0.6777 | 0.6426 | 0.1524    | 0.2464 | 0.1028 | 0.1514 |   1.468  |
| Ridge Classifier    | 0.6106   | 0.6777 | 0.6429 | 0.1524    | 0.2464 | 0.1028 | 0.1514 |   0.411  |
| SVM (Linear)        | 0.5563   | 0.5565 | 0.4962 | 0.1376    | 0.1653 | 0.0314 | 0.0470 |   1.827  |
| Logistic Regression | 0.5548   | 0.6182 | 0.6238 | 0.1315    | 0.2172 | 0.0641 | 0.1023 |   6.559  |
| Naive Bayes         | 0.2164   | 0.6026 | 0.9234 | 0.1054    | 0.1892 | 0.0140 | 0.0548 |   0.384  |
| QDA                 | 0.1449   | 0.5936 | 0.9863 | 0.1026    | 0.1859 | 0.0080 | 0.0557 |   1.069  |

autoMLì„ ì‚¬ìš©í–ˆë‹¤.

#### 07.21 ì¶”ê°€
ì„±ëŠ¥ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ë‹¤.
ì „ì²˜ë¦¬ëœ ml_case_training_dataì™€ ë‚ ì§œë³„ ê°€ê²©ë³€í™”ë¥¼ ë‹´ì€ ml_case_training_hist_data í…Œì´ë¸”ì„ mergeí•˜ì˜€ëŠ”ë°,
ì´ë ‡ê²Œ mergeëœ ë°ì´í„°ê°€ íŠ¸ë ˆì´ë‹ê³¼ í…ŒìŠ¤íŠ¸ì…‹ì—ì„œ ì œëŒ€ë¡œ ë‚˜ë‰˜ì§€ ì•Šì€ ê²ƒ ê°™ë‹¤.


## 8. ê²°ê³¼ë¬¼ì„ ì´ìš©í•œ ë§ˆì¼€íŒ…ì˜ ê°€ì¹˜ í‰ê°€

### ğŸ“Š ê·¸ë˜í”„ í•´ì„: ì „ë°˜ì ì¸ êµ¬ì¡°

ì¤‘ìš”ë„ ìƒìœ„ 3ê°œ:

1. **origin_up**...(ì›í•« ì¸ì½”ë”©) : ì²˜ìŒ ê°€ì…í•œ ì „ê¸° ìº í˜ì¸

2. **margin_net_pow_ele** : ì „ë ¥ ê°€ì… ìˆœë§ˆì§„

3. **cons_last_month** :ì§ì „ ì›” ì†Œë¹„ëŸ‰



**ğŸ‘‰ ì¦‰, ìƒìœ„ ëª‡ ê°œ featureê°€ ì „ì²´ ëª¨ë¸ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ë” ë§ì´ ì‚¬ìš©ë˜ê±°ë‚˜ ì¤‘ìš”**

=======
$$
\frac{\text{ì˜ˆì¸¡ ì´ìœ¤}}{\text{ì •í™•í•˜ê²Œ ì˜ˆì¸¡ì‹œ ì´ìœ¤}} = 
\frac{\text{ì‹¤ì œì´íƒˆì ìˆ˜ * ë§¤ì¶œ - ì´ ë§ˆì¼€íŒ…ë¹„ìš© }}{\text{ì‹¤ì œ ì´íƒˆì ìˆ˜ * (ë§¤ì¶œ-ë§ˆì¼€íŒ…ë¹„ìš©)}}
$$


$$
\frac{TP * r  - ( TP + FP ) * c}{TP(r - c)}
$$ 

$$
= 1 - \frac{FP * c}  {TP(r - c)} \approx Recall
$$

ë”°ë¼ì„œ Recallì´ ë†’ì€ ëª¨ë¸ì„ ëª©í‘œë¡œ ì§„í–‰í•œë‹¤.

## 6. EDA

ê²°ì¸¡ì¹˜ 70% ì´ìƒ ì¹¼ëŸ¼ ì œê±°  
ê³ ê° íšŒì‚¬ í™œë™, ê³ ê°ì´ ê°€ì…í•œ ìº í˜ì¸ ì¹¼ëŸ¼ì€ ì˜¤ë¸Œì íŠ¸ í˜•ì´ë¯€ë¡œ ê²°ì¸¡ì¹˜ë¥¼ ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ë¡œ ë¶„ë¥˜í•œë‹¤.   

ì¹´í…Œê³ ë¦¬ë¥¼ ì›í•« ì¸ì½”ë”©í•˜ë©´ ì¹´í…Œê³ ë¦¬ê°„ì˜ ìœ ì‚¬ì„±ì„ ê³ ë ¤í•˜ì§€ ëª»í•œë‹¤.  
ì´ë¥¼í…Œë©´   
```ê´€ê´‘ì—…```ê³¼ ```ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ì—…``` ê°„ì˜ ê±°ë¦¬ = ```ë¨¸ì‹ ëŸ¬ë‹ ì‚¬ì—…```ê³¼ ```ë”¥ëŸ¬ë‹ ì‚¬ì—…```ê°„ì˜ ê±°ë¦¬  
ë¡œ ì¸ì‹í•˜ê²Œ ëœë‹¤.  
ë”°ë¼ì„œ ì¹´í…Œê³ ë¦¬ëŠ” ë‹¨ì–´ì˜ ìœ ì‚¬ì„±ì„ ë°˜ì˜í•˜ëŠ ì›Œë“œ ì„ë² ë”©í•œë‹¤.  

ë‚ ì§œë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜  

date_end ì¹¼ëŸ¼ì˜ ê²°ì¸¡ì¹˜ : ```ê³„ì•½ì‹œì‘ì¼``` + ```í‰ê·  ê³„ì•½ê¸°ê°„```ìœ¼ë¡œ ì„¤ì •
```
ì´íƒˆ = clean[clean['churn'] == 1]
ìœ ì§€ = clean[clean['churn'] == 0]

m = int((ìœ ì§€["date_end"] - ìœ ì§€["date_activ"]).mean())
mask = clean["date_end"].isna()
clean.loc[mask, "date_end"] = clean.loc[mask, "date_activ"] + m
```
ë‚ ì§œ ì¹¼ëŸ¼ë“¤ì€ ë°ì´í„° ì œì•½ ì¡°ê±´ì´ ìˆë‹¤.  
ì˜ˆë¥¼ë“¤ì–´ ê³„ì•½ ì‹œì‘ì¼ì€ ë°˜ë“œì‹œ ê³„ì•½ ì¢…ë£Œì¼ë³´ë‹¤ ë¹¨ë¼ì•¼í•œë‹¤.  
ì´ëŸ¬í•œ ë°ì´í„° ì œì•½ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ì„œ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš´ë‹¤.  

ì´ ë°ì´í„°ì…‹ì˜ ì¡°ê±´ì€
> date_activ, date_renewal <= date_end

ë‚ ì§œí˜• ì¹¼ëŸ¼ë§Œ ì‚´í´ë³¸ë‹¤.
|   | date_activ | date_end | date_modif_prod | date_renewal |
|---|------------|----------|-----------------|--------------|
| 0 | 4694       | 6154     | 4694            | 5791         |
| 1 | 4914       | 6010     | <NA>            | 5652         |
| 2 | 3520       | 6086     | 3520            | 5721         |
| 3 | 3758       | 5950     | 3758            | 5585         |
| 4 | 3741       | 5933     | 3741            | 5568         |

date_activì™€ date_modif_prodê°€ ê°™ì€ ë°ì´í„°ë“¤ì´ ê°„í˜¹ ìˆë‹¤.
```
#ë¹„ì´íƒˆìë“¤ì˜ date_modif_prod - date_activ
lt_0 = clean[clean["churn"]==0]["date_modif_prod"] - clean[clean["churn"]==0]["date_activ"]
print(f"ë¹„ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: {(lt_0== 0).sum() / lt_0.shape[0]:.4f}")

#ì´íƒˆìë“¤ì˜ date_modif_prod - date_activ
lt_1 = clean[clean["churn"]==1]["date_modif_prod"] - clean[clean["churn"]==1]["date_activ"]
print(f"ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: {(lt_1== 0).sum() / lt_1.shape[0]:.4f}")
```
ë¹„ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: 0.5034   
ì´íƒˆì ì†Œìš”ì‹œê°„ 0ì˜ ë¹„ìœ¨: 0.4301
ìƒí’ˆ ìˆ˜ì •ê¹Œì§€ì˜ ì†Œìš”ì‹œê°„ì´ 7%p ì°¨ì´ë‚˜ëŠ” ê²ƒì„ í™•ì¸

ì´ë¥¼ ê³ ë ¤í•˜ì—¬ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš´ë‹¤.
```
#ì´ê²ƒì„ ê³ ë ¤í•˜ì—¬ ê²°ì¸¡ì¹˜ë¥¼ ì±„ì›€
import numpy as np
lt_0_rat = 0.5034
lt_0_mean = 1432

lt_1_rat = 0.4301
lt_1_mean = 1266

#ë¹„ì´íƒˆìì—ì„œ 0ì˜ ë¹„ìœ¨ë§Œí¼ 0 í• ë‹¹ 
mask = clean['date_modif_prod'].isna() & (clean['churn'] == 0)
na_idx = clean[mask].index
n_total = len(na_idx)
n_zero = int(n_total * lt_0_rat)
zero_idx = np.random.choice(na_idx, size=n_zero, replace=False)
clean.loc[zero_idx, 'date_modif_prod'] = 0

#ë¹„ì´íƒˆìì—ì„œ ë‚˜ë¨¸ì§€ëŠ” date_activ+í‰ê· ìœ¼ë¡œ í• ë‹¹
mask = clean["date_modif_prod"].isna() & (clean["churn"] == 0)
clean.loc[mask, "date_modif_prod"] = clean.loc[mask, "date_activ"] + lt_0_mean


#ì´íƒˆìì—ì„œ 0ì˜ ë¹„ìœ¨ë§Œí¼ 0 í• ë‹¹ 
mask = clean['date_modif_prod'].isna() & (clean['churn'] == 1)
na_idx = clean[mask].index
n_total = len(na_idx)
n_zero = int(n_total * lt_1_rat)
zero_idx = np.random.choice(na_idx, size=n_zero, replace=False)
clean.loc[zero_idx, 'date_modif_prod'] = 0

#ë¹„ì´íƒˆìì—ì„œ ë‚˜ë¨¸ì§€ëŠ” date_activ+í‰ê· ìœ¼ë¡œ í• ë‹¹
mask = clean["date_modif_prod"].isna() & (clean["churn"] == 1)
clean.loc[mask, "date_modif_prod"] = clean.loc[mask, "date_activ"] + lt_1_mean
```

date_renewalì€ íŠ¹ë³„í•œ íŠ¹ì„±ì´ ì—†ìœ¼ë‹ˆ ë°ì´í„° ì¡°ê±´ì„ ë§Œì¡±í•˜ê²Œë” ê²°ì¸¡ì¹˜ ì™„ì„±

ë°ì´í„° ì¡°ê±´ : ```date_activ, date_renewal <= date_end```
dr = (1- (dr-de / de-da)mean) *de
```
mean = ((clean["date_renewal"] - clean["date_end"]) / (clean["date_end"] - clean["date_activ"])).mean()
mask = clean["date_renewal"].isna()
clean.loc[mask, "date_renewal"] = ((1 - mean) * clean.loc[mask, "date_end"]).astype(int)
```

## 7. ë°ì´í„° ì¦ê°• í›„ ëª¨ë¸ë³„ ì„±ëŠ¥ ë¹„êµ

SMOTEìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¦ê°•í•œë‹¤.

```
TransformerWrapper(exclude=None, include=None, transformer=FixImbalancer(estimator=SMOTE(k_neighbors=5, random_state=42, sampling_strategy='auto')))
```
KNN, K=5 ì‚¬ìš©

| Description                 | Value            |
|:----------------------------|:-----------------|
| Session id                  | 42               |
| Target                      | churn            |
| Target type                 | Binary           |
| Original data shape         | (193002, 29)     |
| Transformed data shape      | (301351, 40)     |
| Transformed train set shape | (243450, 40)     |
| Transformed test set shape  | (57901, 40)      |
| Numeric features            | 24               |
| Categorical features        | 4                |
| Preprocess                  | True             |
| Imputation type             | simple           |
| Numeric imputation          | mean             |
| Categorical imputation      | mode             |
| Maximum one-hot encoding    | 25               |
| Encoding method             | None             |
| Fix imbalance               | True             |
| Fix imbalance method        | SMOTE            |
| Fold Generator              | StratifiedKFold  |
| Fold Number                 | 10               |
| Log Experiment              | False            |
| Experiment Name             | clf-default-name |
| USI                         | cbd6             |

ìµœì¢… í•™ìŠµ ë°ì´í„°ì˜ í˜•íƒœëŠ” ìœ„ì™€ ê°™ë‹¤.
XGBoost, CatBoost, LightGBMì„ í¬í•¨í•œ 16ì¢…ì˜ ë¨¸ì‹ ëŸ¬ë‹ì˜ ì„±ëŠ¥ì„ ë¹„êµí•œë‹¤.

| Model               | Accuracy |   AUC  | Recall | Precision |   F1   | Kappa  |  MCC   | TT (Sec) |
|:--------------------|---------:|-------:|-------:|----------:|-------:|-------:|-------:|---------:|
| KNN                 | 0.9996   | 1.0000 | 1.0000 | 0.9961    | 0.9980 | 0.9978 | 0.9978 |   3.386  |
| Random Forest       | 0.9999   | 1.0000 | 0.9993 | 0.9999    | 0.9988 | 0.9998 | 0.9996 |   6.533  |
| Extra Trees         | 0.9998   | 1.0000 | 0.9981 | 0.9999    | 0.9990 | 0.9989 | 0.9989 |   7.581  |
| Decision Tree       | 0.9985   | 0.9961 | 0.9931 | 0.9916    | 0.9924 | 0.9915 | 0.9915 |   1.033  |
| CatBoost            | 0.9941   | 0.9992 | 0.9822 | 0.9594    | 0.9707 | 0.9674 | 0.9675 |  44.064  |
| XGBoost             | 0.9649   | 0.9887 | 0.9132 | 0.7736    | 0.8375 | 0.8180 | 0.8216 |   1.647  |
| Dummy Classifier    | 0.9010   | 0.5000 | 0.0000 | 0.0000    | 0.0000 | 0.0000 | 0.0000 |   0.656  |
| LightGBM            | 0.8880   | 0.9285 | 0.7693 | 0.4608    | 0.5763 | 0.5164 | 0.5390 | 117.068  |
| Gradient Boosting   | 0.7546   | 0.7797 | 0.6388 | 0.2318    | 0.3401 | 0.2280 | 0.2723 |  10.997  |
| AdaBoost            | 0.6875   | 0.7233 | 0.6255 | 0.1836    | 0.2839 | 0.1544 | 0.2021 |   3.075  |
| LDA                 | 0.6108   | 0.6777 | 0.6426 | 0.1524    | 0.2464 | 0.1028 | 0.1514 |   1.468  |
| Ridge Classifier    | 0.6106   | 0.6777 | 0.6429 | 0.1524    | 0.2464 | 0.1028 | 0.1514 |   0.411  |
| SVM (Linear)        | 0.5563   | 0.5565 | 0.4962 | 0.1376    | 0.1653 | 0.0314 | 0.0470 |   1.827  |
| Logistic Regression | 0.5548   | 0.6182 | 0.6238 | 0.1315    | 0.2172 | 0.0641 | 0.1023 |   6.559  |
| Naive Bayes         | 0.2164   | 0.6026 | 0.9234 | 0.1054    | 0.1892 | 0.0140 | 0.0548 |   0.384  |
| QDA                 | 0.1449   | 0.5936 | 0.9863 | 0.1026    | 0.1859 | 0.0080 | 0.0557 |   1.069  |

autoMLì„ ì‚¬ìš©í–ˆë‹¤.



## 8. ê²°ê³¼ë¬¼ì„ ì´ìš©í•œ ë§ˆì¼€íŒ…ì˜ ê°€ì¹˜ í‰ê°€

### ğŸ“Š ê·¸ë˜í”„ í•´ì„: ì „ë°˜ì ì¸ êµ¬ì¡°

ì¤‘ìš”ë„ ìƒìœ„ 3ê°œ:

1. **origin_up**...(ì›í•« ì¸ì½”ë”©) : ì²˜ìŒ ê°€ì…í•œ ì „ê¸° ìº í˜ì¸

2. **margin_net_pow_ele** : ì „ë ¥ ê°€ì… ìˆœë§ˆì§„

3. **cons_last_month** :ì§ì „ ì›” ì†Œë¹„ëŸ‰



**ğŸ‘‰ ì¦‰, ìƒìœ„ ëª‡ ê°œ featureê°€ ì „ì²´ ëª¨ë¸ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ë” ë§ì´ ì‚¬ìš©ë˜ê±°ë‚˜ ì¤‘ìš”**

>>>>>>> p2/main



> origin_up...(ì›í•« ì¸ì½”ë”©) : ì²˜ìŒ ê°€ì…í•œ ì „ê¸° ìº í˜ì¸<br>

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-07-11 15.49.40.png](attachment:85930c09-30cd-43a4-9f29-7c0c45cba886.png)

**ğŸ‘‰ 3ê°œ ë³€ìˆ˜ë“¤ë§Œ ì´íƒˆ -> í•´ë‹¹ ê²½ë¡œë¡œ ìœ ì…ëœ ê³ ê°ë“¤ì—ê²Œë§Œ ì¶”ê°€ í• ì¸ í˜¹ì€ ë‚˜ë¨¸ì§€ ë‘ê°œì˜ ê²½ë¡œë¡œ ê°€ì…í•˜ë„ë¡ ìœ ë„**



> 2. margin_net_pow_ele : ì „ë ¥ ê°€ì… ìˆœë§ˆì§„<br>

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-07-11 15.50.04.png](attachment:42455153-7525-4f52-961d-1fa2169150a8.png)



**ğŸ‘‰ 1êµ¬ê°„ ê³ ê°(ê³ ë§ˆì§„ ê³ ê°) ë“¤ì˜ ì´íƒˆ ë¹„ìœ¨ ë†’ìŒ : ì´íƒˆ ì•ˆë˜ë„ë¡ ê´€ë¦¬ ì „ëµ ì‹œê¸‰. ë§ì¶¤í˜• í˜œíƒ ì œê³µ**

**ğŸ‘‰ 5êµ¬ê°„ ê³ ê°(ì €ë§ˆì§„ ê³ ê°) ë“¤ì˜ ì´íƒˆ ë¹„ìœ¨ ë‚®ìŒ : ì´ìœ  íŒŒì•… í•„ìš”. í˜œíƒ ê³¼ì‰ ì—¬ë¶€ ë¶„ì„, ê°€ê²© ì¸ìƒ ê³ ë ¤**


> 3. cons_last_month : ì§ì „ ì›” ì†Œë¹„ëŸ‰<br>

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2025-07-11 15.50.25.png](attachment:abd289d3-f124-4c3b-ac4c-f82b552ac139.png)


**ğŸ‘‰ ì‚¬ìš©ëŸ‰ ë§ì€ ê³ ê° â†’ ì´íƒˆ ê±°ì˜ ì—†ìŒ â†’ ìš°ìˆ˜ ê³ ê° or ê³ ì • ì‚¬ìš©ìì¸µ : ë§ì¶¤ í˜œíƒ ìœ ì§€, ì´íƒˆ ë°©ì§€ ìš°ì„  ëŒ€ìƒ**

**ğŸ‘‰ ì‚¬ìš©ëŸ‰ ì ì€ ê³ ê° â†’ ì´íƒˆ ë§ìŒ â†’ ì „í™˜ ì¤€ë¹„, ë§Œì¡±ë„ ë‚®ìŒ, ë˜ëŠ” ë‹¨ê¸° ê³ ê° ê°€ëŠ¥ì„± : íƒ€ê²Ÿ ë¦¬ë§ˆì¼€íŒ… or ë¯¸ë¼ ìƒí’ˆ ì œì•ˆ ê³ ë ¤**



 **â€¼ï¸ì¶”ê°€ ì£¼ì˜ ì‚¬í•­**

![image.png](attachment:61d4f135-3ee7-4aaf-8213-3e613fb4ec6d.png)

**ğŸ‘‰ í• ì¸ ìº í˜ì¸ ì‹œ discount level 5~10 êµ¬ê°„ì€ í”¼í•˜ë„ë¡ ê¶Œê³ **